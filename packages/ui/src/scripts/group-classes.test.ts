import { describe, expect, it } from 'vitest'

import { groupClasses } from './group-classes'

describe('groupClasses', () => {
  it('orders all regex patterns correctly', () => {
    const result = groupClasses([
      'starting:open:opacity-0',
      'open:opacity-100',
      'ltr:ml-3',
      'rtl:mr-3',
      'data-[side=top]:border-purple-500',
      'aria-[sort=ascending]:bg-sky-700',
      'aria-selected:bg-sky-500',
      'aria-required:text-red-500',
      'aria-readonly:text-gray-500',
      'aria-pressed:bg-blue-500',
      'aria-hidden:hidden',
      'aria-expanded:block',
      'aria-disabled:opacity-50',
      'aria-checked:border-green-500',
      'aria-busy:cursor-wait',
      'not-supports-[display:grid]:flex',
      'supports-[display:grid]:grid',
      'print:hidden',
      'noscript:block',
      'landscape:hidden',
      'portrait:hidden',
      'any-pointer-none:opacity-0',
      'any-pointer-coarse:opacity-50',
      'any-pointer-fine:opacity-100',
      'pointer-none:cursor-default',
      'pointer-coarse:cursor-pointer',
      'pointer-fine:cursor-crosshair',
      'inverted-colors:shadow-none',
      'forced-colors:appearance-auto',
      'contrast-less:opacity-50',
      'contrast-more:opacity-100',
      'motion-reduce:transition-none',
      'motion-safe:transition-all',
      '@max-[96rem]:bg-red-500',
      '@max-7xl:bg-orange-500',
      '@max-6xl:bg-yellow-500',
      '@max-5xl:bg-green-500',
      '@max-4xl:bg-blue-500',
      '@max-3xl:bg-indigo-500',
      '@max-2xl:bg-purple-500',
      '@max-xl:bg-pink-500',
      '@max-lg:bg-teal-500',
      '@max-md:bg-cyan-500',
      '@max-sm:bg-amber-500',
      '@max-xs:bg-lime-500',
      '@max-2xs:bg-emerald-500',
      '@max-3xs:bg-fuchsia-500',
      '@min-[96rem]:bg-sky-500',
      '@7xl:bg-sky-700',
      '@6xl:bg-sky-700',
      '@5xl:bg-sky-700',
      '@4xl:bg-sky-700',
      '@3xl:bg-sky-700',
      '@2xl:bg-sky-700',
      '@xl:bg-sky-700',
      '@lg:bg-sky-700',
      '@md:bg-sky-700',
      '@sm:bg-sky-700',
      '@xs:bg-sky-700',
      '@2xs:bg-sky-700',
      '@3xs:bg-sky-700',
      'max-[120rem]:p-10',
      'max-2xl:p-9',
      'max-xl:p-8',
      'max-lg:p-7',
      'max-md:p-6',
      'max-sm:p-5',
      'min-[120rem]:p-4',
      '2xl:p-3',
      'xl:p-2',
      'lg:p-1',
      'md:p-0.5',
      'sm:p-0.25',
      'placeholder:text-gray-400',
      'backdrop:blur-md',
      'file:bg-green-500',
      'selection:bg-yellow-500',
      'marker:text-red-500',
      'first-line:uppercase',
      'first-letter:text-3xl',
      'after:content-[""]',
      'before:content-[""]',
      'read-only:bg-gray-100',
      'autofill:bg-yellow-200',
      'details-content:block',
      'placeholder-shown:italic',
      'out-of-range:border-red-500',
      'in-range:border-green-500',
      'user-invalid:ring-2',
      'user-valid:ring-0',
      'invalid:border-red-500',
      'valid:border-green-500',
      'required:text-blue-500',
      'optional:text-gray-500',
      'default:bg-white',
      'indeterminate:border-gray-300',
      'checked:bg-blue-500',
      'enabled:cursor-pointer',
      'disabled:opacity-50',
      'empty:hidden',
      'nth-last-of-type-2:bg-red-500',
      'nth-of-type-2:bg-green-500',
      'nth-last-2:bg-blue-500',
      'nth-2:bg-yellow-500',
      'only-of-type:border-purple-500',
      'last-of-type:border-pink-500',
      'first-of-type:border-teal-500',
      'even:bg-gray-100',
      'odd:bg-white',
      'only:border-black',
      'last:mb-0',
      'first:mt-0',
      'inert:opacity-25',
      'not-focus:bg-indigo-700',
      'in-focus:opacity-100',
      'peer-invalid:visible',
      'group-hover:bg-sky-500',
      'has-checked:pl-8',
      '**:bg-sky-200',
      '*:bg-sky-100',
      'target:underline',
      'visited:text-purple-500',
      'active:scale-95',
      'focus-visible:ring-4',
      'focus-within:ring-2',
      'focus:ring-1',
      'hover:bg-sky-700',
      'dark:bg-gray-800',
      'bg-white text-black italic'
    ])

    expect(result).toEqual([
      'bg-white text-black italic',
      'dark:bg-gray-800',
      'hover:bg-sky-700',
      'focus:ring-1',
      'focus-within:ring-2',
      'focus-visible:ring-4',
      'active:scale-95',
      'visited:text-purple-500',
      'target:underline',
      '*:bg-sky-100',
      '**:bg-sky-200',
      'has-checked:pl-8',
      'group-hover:bg-sky-500',
      'peer-invalid:visible',
      'in-range:border-green-500',
      'in-focus:opacity-100',
      'not-supports-[display:grid]:flex',
      'not-focus:bg-indigo-700',
      'inert:opacity-25',
      'first:mt-0',
      'last:mb-0',
      'only:border-black',
      'odd:bg-white',
      'even:bg-gray-100',
      'first-of-type:border-teal-500',
      'last-of-type:border-pink-500',
      'only-of-type:border-purple-500',
      'nth-last-of-type-2:bg-red-500',
      'nth-of-type-2:bg-green-500',
      'nth-last-2:bg-blue-500',
      'nth-2:bg-yellow-500',
      'empty:hidden',
      'disabled:opacity-50',
      'enabled:cursor-pointer',
      'checked:bg-blue-500',
      'indeterminate:border-gray-300',
      'default:bg-white',
      'optional:text-gray-500',
      'required:text-blue-500',
      'valid:border-green-500',
      'invalid:border-red-500',
      'user-valid:ring-0',
      'user-invalid:ring-2',
      'out-of-range:border-red-500',
      'placeholder-shown:italic',
      'details-content:block',
      'autofill:bg-yellow-200',
      'read-only:bg-gray-100',
      'before:content-[""]',
      'after:content-[""]',
      'first-letter:text-3xl',
      'first-line:uppercase',
      'marker:text-red-500',
      'selection:bg-yellow-500',
      'file:bg-green-500',
      'backdrop:blur-md',
      'placeholder:text-gray-400',
      'sm:p-0.25',
      'md:p-0.5',
      'lg:p-1',
      'xl:p-2',
      '2xl:p-3',
      'min-[120rem]:p-4',
      'max-sm:p-5',
      'max-md:p-6',
      'max-lg:p-7',
      'max-xl:p-8',
      'max-2xl:p-9',
      'max-[120rem]:p-10',
      '@3xs:bg-sky-700',
      '@2xs:bg-sky-700',
      '@xs:bg-sky-700',
      '@sm:bg-sky-700',
      '@md:bg-sky-700',
      '@lg:bg-sky-700',
      '@xl:bg-sky-700',
      '@2xl:bg-sky-700',
      '@3xl:bg-sky-700',
      '@4xl:bg-sky-700',
      '@5xl:bg-sky-700',
      '@6xl:bg-sky-700',
      '@7xl:bg-sky-700',
      '@min-[96rem]:bg-sky-500',
      '@max-3xs:bg-fuchsia-500',
      '@max-2xs:bg-emerald-500',
      '@max-xs:bg-lime-500',
      '@max-sm:bg-amber-500',
      '@max-md:bg-cyan-500',
      '@max-lg:bg-teal-500',
      '@max-xl:bg-pink-500',
      '@max-2xl:bg-purple-500',
      '@max-3xl:bg-indigo-500',
      '@max-4xl:bg-blue-500',
      '@max-5xl:bg-green-500',
      '@max-6xl:bg-yellow-500',
      '@max-7xl:bg-orange-500',
      '@max-[96rem]:bg-red-500',
      'motion-safe:transition-all',
      'motion-reduce:transition-none',
      'contrast-more:opacity-100',
      'contrast-less:opacity-50',
      'forced-colors:appearance-auto',
      'inverted-colors:shadow-none',
      'pointer-fine:cursor-crosshair',
      'pointer-coarse:cursor-pointer',
      'pointer-none:cursor-default',
      'any-pointer-fine:opacity-100',
      'any-pointer-coarse:opacity-50',
      'any-pointer-none:opacity-0',
      'portrait:hidden',
      'landscape:hidden',
      'noscript:block',
      'print:hidden',
      'supports-[display:grid]:grid',
      'aria-busy:cursor-wait',
      'aria-checked:border-green-500',
      'aria-disabled:opacity-50',
      'aria-expanded:block',
      'aria-hidden:hidden',
      'aria-pressed:bg-blue-500',
      'aria-readonly:text-gray-500',
      'aria-required:text-red-500',
      'aria-selected:bg-sky-500',
      'aria-[sort=ascending]:bg-sky-700',
      'data-[side=top]:border-purple-500',
      'rtl:mr-3',
      'ltr:ml-3',
      'open:opacity-100',
      'starting:open:opacity-0'
    ])
  })
})
